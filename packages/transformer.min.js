window.Transformer=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t){if(r(this,e),void 0===t||!Array.isArray(t))throw new Error("first parameter needs to be a two-dimensional array");this.matrix=t}return a(e,[{key:"translate",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.multiply(new e([[1,0,t],[0,1,n],[0,0,1]]),r).matrix;this.matrix=o}},{key:"rotate",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t*(Math.PI/180),o=Math.cos(r),a=Math.sin(r),i=this.multiply(new e([[o,-a,0],[a,o,0],[0,0,1]]),n).matrix;this.matrix=i}},{key:"scale",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.multiply(new e([[t,0,0],[0,n,0],[0,0,1]]),r).matrix;this.matrix=o}},{key:"skew",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t*(Math.PI/180),a=n*(Math.PI/180),i=Math.tan(o),u=Math.tan(a),s=this.multiply(new e([[1,i,0],[u,1,0],[0,0,1]]),r).matrix;this.matrix=s}},{key:"multiply",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.rows!==t.columns||this.columns!==t.rows)throw new Error("cannot multiply because matrix dimensions do not match (n*m !== m*n)");for(var r=[],o=this.matrix,a=t.matrix,i=0;i<o.length;i++){r[i]=[];for(var u=0;u<a[0].length;u++){for(var s=0,l=0;l<o[0].length;l++)s+=o[i][l]*a[l][u];r[i][u]=n?parseFloat(s.toFixed(3)):s}}return new e(r)}},{key:"multiplyBy",value:function(e){var t=e.multiply(this).matrix;this.matrix=t}},{key:"copy",value:function(){var t=this.matrix;return new e(JSON.parse(JSON.stringify(t)))}},{key:"toJSON",value:function(){return JSON.stringify(this.matrix)}},{key:"toCss",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.matrix,r=function(e,r){return t?parseFloat(n[e][r].toFixed(3)):n[e][r]};if(3===this.rows&&3===this.columns){if(this.equals(e.identity(3)))return"none";var o=r(0,0),a=r(1,0),i=r(0,1),u=r(1,1),s=r(0,2),l=r(1,2);return"matrix(".concat(o,", ").concat(a,", ").concat(i,", ").concat(u,", ").concat(s,", ").concat(l,")")}if(this.equals(e.identity(4)))return"none";var f=r(0,0),c=r(1,0),y=r(2,0),m=r(3,0),p=r(0,1),d=r(1,1),h=r(2,1),v=r(3,1),b=r(0,2),g=r(1,2),w=r(2,2),x=r(3,2),_=r(0,3),T=r(1,3),k=r(2,3),O=r(3,3);return"matrix3d(".concat(f,", ").concat(c,", ").concat(y,", ").concat(m,", ").concat(p,", ").concat(d,", ").concat(h,", ").concat(v,", ").concat(b,", ").concat(g,", ").concat(w,", ").concat(x,", ").concat(_,", ").concat(T,", ").concat(k,", ").concat(O,")")}},{key:"equals",value:function(t){return e.equals(this,t)}},{key:"toString",value:function(){return"Matrix [rows=".concat(this.rows,",columns=").concat(this.columns,",matrix=").concat(JSON.stringify(this.matrix),"]")}},{key:"matrix",set:function(e){this._matrix=e,this._rows=e.length,this._columns=e[0].length},get:function(){return this._matrix}},{key:"rows",get:function(){return this._rows}},{key:"columns",get:function(){return this._columns}},{key:"a",get:function(){return this.matrix[0][0]}},{key:"b",get:function(){return this.matrix[1][0]}},{key:"c",get:function(){return this.matrix[0][1]}},{key:"d",get:function(){return this.matrix[1][1]}},{key:"tx",get:function(){return this.matrix[0][2]}},{key:"ty",get:function(){return this.matrix[1][2]}},{key:"angle",get:function(){return 180*Math.atan2(this.b,this.a)/Math.PI}},{key:"scaleX",get:function(){return this.a}},{key:"scaleY",get:function(){return this.d}},{key:"inverse",get:function(){var t=this.matrix;if(t.length!==t[0].length)throw new Error("matrix is not squared");var n=0,r=0,o=0,a=t.length,i=0,u=[],s=[];for(n=0;n<a;n+=1)for(u[u.length]=[],s[s.length]=[],o=0;o<a;o+=1)u[n][o]=n==o?1:0,s[n][o]=t[n][o];for(n=0;n<a;n+=1){if(0==(i=s[n][n])){for(r=n+1;r<a;r+=1)if(0!=s[r][n]){for(o=0;o<a;o++)i=s[n][o],s[n][o]=s[r][o],s[r][o]=i,i=u[n][o],u[n][o]=u[r][o],u[r][o]=i;break}if(0==(i=s[n][n]))throw new Error("matrix is not invertable")}for(o=0;o<a;o++)s[n][o]=s[n][o]/i,u[n][o]=u[n][o]/i;for(r=0;r<a;r++)if(r!=n)for(i=s[r][n],o=0;o<a;o++)s[r][o]-=i*s[n][o],u[r][o]-=i*u[n][o]}return new e(u)}}],[{key:"fromJSON",value:function(t){return new e(JSON.parse(t))}},{key:"equals",value:function(e,t){return JSON.stringify(e.matrix)===JSON.stringify(t.matrix)}},{key:"identity",value:function(t){for(var n=[],r=0;r<t;r++)for(var o=n[r]=[],a=0;a<t;a++)o[a]=a===r?1:0;return new e(n)}},{key:"from",value:function(t){var n="none";if(t instanceof SVGElement?(n=t.getAttribute("transform"))&&""!==n||(n=t.style.transform):1===t.nodeType&&(n=window.getComputedStyle(t).transform),""===n||"none"===n)return e.identity(3);var r=/([-+]?[\d\.]+)/g;if(n.indexOf("matrix3d")>-1){var o=parseFloat(r.exec(n)[0]),a=parseFloat(r.exec(n)[0]),i=parseFloat(r.exec(n)[0]),u=parseFloat(r.exec(n)[0]),s=parseFloat(r.exec(n)[0]),l=parseFloat(r.exec(n)[0]),f=parseFloat(r.exec(n)[0]),c=parseFloat(r.exec(n)[0]),y=parseFloat(r.exec(n)[0]),m=parseFloat(r.exec(n)[0]),p=parseFloat(r.exec(n)[0]),d=parseFloat(r.exec(n)[0]);return new e([[o,s,y,parseFloat(r.exec(n)[0])],[a,l,m,parseFloat(r.exec(n)[0])],[i,f,p,parseFloat(r.exec(n)[0])],[u,c,d,parseFloat(r.exec(n)[0])]])}var h=parseFloat(r.exec(n)[0]),v=parseFloat(r.exec(n)[0]),b=parseFloat(r.exec(n)[0]),g=parseFloat(r.exec(n)[0]);return new e([[h,b,parseFloat(r.exec(n)[0])],[v,g,parseFloat(r.exec(n)[0])],[0,0,1]])}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n){r(this,e),this.x=t,this.y=n}return a(e,[{key:"toString",value:function(){return"".concat(e.name," [x=").concat(this.x,",y=").concat(this.y,"]")}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(n(1)),s=r(n(0)),l=function(){function e(){o(this,e),this.matrix=s.default.identity(3),this._centerPoint=new u.default(0,0)}return i(e,[{key:"apply",value:function(e){var t=s.default.identity(3);t.translate(this._centerPoint.x,this._centerPoint.y),e.multiplyBy(t.inverse),e.multiplyBy(this.matrix),e.multiplyBy(t)}},{key:"unapply",value:function(e){var t=s.default.identity(3);t.translate(this._centerPoint.x,this._centerPoint.y),e.multiplyBy(t.inverse),e.multiplyBy(this.matrix.inverse),e.multiplyBy(t)}},{key:"reset",value:function(){this._centerPoint.x=0,this._centerPoint.y=0}},{key:"centerPoint",get:function(){return this._centerPoint}},{key:"inverse",get:function(){throw new Error("inverse not implemented for ".concat(this.constructor.name))}}],[{key:"from",value:function(e){throw new Error("inverse not implemented for transform")}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),y=r(n(2)),m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a(this,t),e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.set(n,r),e}return f(t,e),u(t,[{key:"set",value:function(e,t){this.x=e,this.y=t,this.matrix=new c.default([[1,0,e],[0,1,t],[0,0,1]])}},{key:"update",value:function(e){if(!(e instanceof c.default))throw new Error("matrix needs to be of type ".concat(c.default.name));var t=e,n=t.tx,r=t.ty;this.set(n,r)}},{key:"reset",value:function(){this.set(0,0),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"toString",value:function(){return"".concat(this.constructor.name," [x=").concat(this.x,",y=").concat(this.y,"]")}},{key:"inverse",get:function(){return t.from(this.matrix.inverse)}}],[{key:"from",value:function(e){var n=new t;return n.update(e),n}}]),t}(y.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),y=r(n(2)),m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a(this,t),e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.set(n),e}return f(t,e),u(t,[{key:"set",value:function(e){this.angle=e;var t=e*(Math.PI/180),n=Math.cos(t),r=Math.sin(t);this.matrix=new c.default([[n,-r,0],[r,n,0],[0,0,1]])}},{key:"update",value:function(e){if(!(e instanceof c.default))throw new Error("matrix needs to be of type ".concat(c.default.name));var t=e,n=Math.atan2(t.b,t.a),r=180*n/Math.PI;this.set(r)}},{key:"reset",value:function(){this.set(0),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"toString",value:function(){return"".concat(this.constructor.name," [angle=").concat(this.angle,"]")}},{key:"inverse",get:function(){return t.from(this.matrix.inverse)}}],[{key:"from",value:function(e){var n=new t;return n.update(e),n}}]),t}(y.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:l(o,t,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),y=r(n(2)),m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a(this,t),e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.set(n,r),e}return f(t,e),u(t,[{key:"set",value:function(e,t){this.x=e,this.y=t,this.matrix=new c.default([[e,0,0],[0,t,0],[0,0,1]])}},{key:"update",value:function(e){if(!(e instanceof c.default))throw new Error("matrix needs to be of type ".concat(c.default.name));var t=e,n=Math.sqrt(Math.pow(t.a,2)+Math.pow(t.b,2)),r=Math.sqrt(Math.pow(t.c,2)+Math.pow(t.d,2));this.set(n,r)}},{key:"reset",value:function(){this.set(1,1),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"toString",value:function(){return"".concat(this.constructor.name," [x=").concat(this.x,",y=").concat(this.y,"]")}},{key:"inverse",get:function(){return t.from(this.matrix.inverse)}}],[{key:"from",value:function(e){var n=new t;return n.update(e),n}}]),t}(y.default);t.default=m},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),f=function(e){function t(){var e;return o(this,t),e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e.transforms=[],e}return s(t,e),i(t,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof l.default))throw new Error("transform needs to be of type ".concat(l.default.name));this.transforms.push({inverse:t,transform:e})}},{key:"remove",value:function(e){if(!(e instanceof l.default))throw new Error("transform needs to be of type ".concat(l.default.name));if(!this.transforms.contains(e))throw new Error("transform is not part of this transform group");var t=this.transforms.indexOf(e);this.transforms.splice(t,1)}},{key:"apply",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.transforms.forEach(function(r){var o=r.transform,a=r.inverse;(!n||o instanceof n||o instanceof t)&&(a?o.unapply(e,n):o.apply(e,n))})}},{key:"unapply",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.transforms.slice().reverse().forEach(function(r){var o=r.transform,a=r.inverse;(!n||o instanceof n||o instanceof t)&&(a?o.apply(e,n):o.unapply(e,n))})}},{key:"reset",value:function(){this.transforms.forEach(function(e){e.transform.reset()})}},{key:"toString",value:function(){return"".concat(this.constructor.name," [transforms=[").concat(this.transforms.map(function(e){var t=e.transform;return e.inverse?t.inverse.toString():t.toString()}).join(", "),"]]")}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(n(1)),s=r(n(0)),l=r(n(3)),f=r(n(4)),c=r(n(5)),y=r(n(6)),m=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o(this,e),!t.parentElement)throw new Error("Element has no parent element. Is the element in the DOM?");if(n&&"function"!=typeof n)throw new Error("callback needs to be a function");this.element=t,this.element.transformer=this,this.callback=n,this.updateInProgress=!1;var a=this.getTransformMatrix();this._scaleTransform=c.default.from(a),this._rotateTransform=f.default.from(a),this._translateTransform=l.default.from(a);var i=new y.default;if(i.add(this._rotateTransform),i.add(this._scaleTransform),i.add(this._translateTransform),this._transforms=i,r){var u=this.element.querySelector(":scope > .transform-origin-point");u||(u=document.createElement("transient"),u.setAttribute("class","transform-origin-point"),t.insertBefore(u,t.firstElementChild))}}return i(e,null,[{key:"version",get:function(){return"{{PKG_VERSION}}"}}]),i(e,[{key:"getTransformMatrix",value:function(){return s.default.from(this.element)}},{key:"refreshTransforms",value:function(){var e=this.getTransformMatrix();this._translateTransform.update(e),this._rotateTransform.update(e),this._scaleTransform.update(e)}},{key:"reapplyTransforms",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=s.default.identity(3);return this.element.renderTransform&&this.element.renderTransform.apply(t),this._transforms.apply(t),this.elementMatrix=t,e?this.updateElement():new Promise(function(e,t){e()})}},{key:"complete",value:function(){this.element.renderTransform&&(this.refreshTransforms(),this.element.renderTransform.reset())}},{key:"updateElement",value:function(){var e=this;return new Promise(function(t,n){e.updateInProgress||(window.requestAnimationFrame(function(){var n=function(){var t=e.elementMatrix.toCss();e.setCssTransform(t)};"function"==typeof e.callback?e.callback.call(e,e.elementMatrix)&&n():n(),e.updateInProgress=!1,t(e.elementMatrix)}),e.updateInProgress=!0)})}},{key:"setCssTransform",value:function(e){this.element.style.position="absolute",this.element.style.transformOrigin="0 0 0",this.element instanceof SVGElement?"none"===e?this.element.removeAttribute("transform"):this.element.setAttribute("transform",e):1===this.element.nodeType&&(this.element.style.webkitTransform=e,this.element.style.mozTransform=e,this.element.style.msTransform=e,this.element.style.oTransform=e,this.element.style.transform=e)}},{key:"getTransformHierarchy",value:function(){var e=[],t=this.element;do{t.transformer&&e.push({transformer:t.transformer,renderTransform:t.renderTransform})}while(null!==(t=t.parentElement));return e.reverse(),e}},{key:"getAncesterElementWithoutTransformer",value:function(){var e=this.element;do{if(!e.transformer)return e}while(null!==(e=e.parentElement));return window.document.body}},{key:"applyToLocalTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._transforms.apply(e,t),this.element.renderTransform&&this.element.renderTransform.apply(e,t)}},{key:"applyToGlobalTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.getTransformHierarchy().forEach(function(n){var r=n.transformer,o=n.renderTransform;r&&r._transforms.unapply(e,t),o&&o.unapply(e,t)})}},{key:"unapplyFromGlobalTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.getTransformHierarchy().forEach(function(n){var r=n.transformer,o=n.renderTransform;o&&o.apply(e,t),r&&r._transforms.apply(e,t)})}},{key:"fromGlobalToLocal",value:function(e){if(!(e instanceof u.default))throw new Error("point needs to be of instance ".concat(u.default.name));var t=this.getAncesterElementWithoutTransformer(),n=t.getBoundingClientRect(),r=n.left,o=n.top,a=r?e.x-r:e.x,i=o?e.y-o:e.y,l=s.default.identity(3);return l.translate(a,i),this.applyToGlobalTransform(l),new u.default(l.tx,l.ty)}},{key:"fromLocalToGlobal",value:function(e){if(!(e instanceof u.default))throw new Error("point needs to be of instance ".concat(u.default.name));var t=s.default.identity(3);t.translate(e.x,e.y),this.unapplyFromGlobalTransform(t);var n=this.getAncesterElementWithoutTransformer(),r=n.getBoundingClientRect(),o=r.left,a=r.top,i=o?t.tx+o:t.tx,l=a?t.ty+a:t.ty;return new u.default(i,l)}},{key:"fromGlobalToLocalDelta",value:function(e){if(!(e instanceof u.default))throw new Error("delta point needs to be of instance ".concat(u.default.name));var t=this.getTransformHierarchy(),n=s.default.identity(3);return n.translate(e.x,e.y),t.forEach(function(e){var t=e.transformer;e.renderTransform;t&&(t._transforms.unapply(n,c.default),t._transforms.unapply(n,f.default))}),new u.default(n.tx,n.ty)}},{key:"destroy",value:function(){delete this._scaleTransform,delete this._rotateTransform,delete this._translateTransform,delete this._transforms}},{key:"localRotation",get:function(){var e=s.default.identity(3);return this.applyToLocalTransform(e,f.default),e.angle}},{key:"globalRotation",get:function(){var e=s.default.identity(3);return this.applyToGlobalTransform(e,f.default),e.angle}},{key:"localScale",get:function(){var e=s.default.identity(3);return this.applyToLocalTransform(e,c.default),new u.default(e.scaleX,e.scaleY)}},{key:"globalScale",get:function(){var e=s.default.identity(3);return this.applyToGlobalTransform(e,c.default),new u.default(e.scaleX,e.scaleY)}},{key:"globalScaleTest",get:function(){var e=s.default.identity(3);e.scale(1,1);var t=[],n=this.element;do{n.transformer&&t.push({transformer:n.transformer,renderTransform:n.renderTransform})}while(null!==(n=n.parentElement));t.reverse().forEach(function(t){var n=t.transformer,r=t.renderTransform;n&&n._transforms.apply(e,c.default),r&&r.apply(e,c.default)});var r=e.a,o=e.d;return new u.default(r,o)}}]),e}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bind=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(7)),o=function(e,t,n){if(!("Promise"in window))throw new Error("transformer.js requires Promise");return new Promise(function(o,a){if(e.transformer)return o(e.transformer);setTimeout(function(){var a=new r.default(e,t,n);a.reapplyTransforms().then(function(){o(a)})},0)})};t.bind=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"TranslateTransform",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"RotateTransform",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ScaleTransform",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TransformGroup",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return f.bind}}),Object.defineProperty(t,"hammerize",{enumerable:!0,get:function(){return c.hammerize}});var o=r(n(1)),a=r(n(0)),i=r(n(3)),u=r(n(4)),s=r(n(5)),l=r(n(6)),f=(r(n(7)),n(8)),c=n(10)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hammerize=void 0;var o=r(n(1)),a=r(n(3)),i=r(n(4)),u=r(n(5)),s=r(n(6)),l=n(8),f=(r(n(11)),function(e,t){return new Promise(function(n,r){var f=window.Hammer;t=Object.assign({pan:!0,rotate:!0,pinch:!0,callback:void 0,enabled:!0,debug:!1},t),(0,l.bind)(e,t.callback,t.debug).then(function(r){var l=new f.Manager(e),c=r.destroy;r.destroy=function(){l.destroy(),c.call(this)},l.add(new f.Pan({threshold:0,pointers:0})),l.add(new f.Rotate({threshold:0})).recognizeWith(l.get("pan")),l.add(new f.Pinch({threshold:0})).recognizeWith([l.get("pan"),l.get("rotate")]);var y=new s.default,m=e.scaleTransform=new u.default,p=e.rotateTransform=new i.default,d=e.translateTransform=new a.default;y.add(m),y.add(p),y.add(d),e.renderTransform=y;var h=function(){return"function"==typeof t.enabled?t.enabled.call(r):t.enabled},v=function(t){var n=t.target;do{if(n.transformer)return n===e}while(null!==(n=n.parentElement));return!1},b=function(e){e.srcEvent.stopPropagation()},g=function(t){var n=new o.default(t.x,t.y);return e.transformer.fromGlobalToLocal(n)},w={x:0,y:0},x=1,_=0,T=0;l.on("hammer.input",function(e){h()&&v(e)&&(b(e),e.isFinal&&r.complete())}),l.on("panstart panmove",function(e){if(h()&&t.pan){if("panstart"===e.type)return w.x=0,void(w.y=0);var n=new o.default(e.deltaX,e.deltaY);n=r.fromGlobalToLocalDelta(n);var a=d.x-w.x+n.x,i=d.y-w.y+n.y;d.set(a,i),r.reapplyTransforms(),w.x=n.x,w.y=n.y}}),l.on("rotatestart rotatemove",function(e){if(h()&&t.rotate){if("rotatestart"===e.type){_=e.rotation,T=0;var n=g(e.center);return p.centerPoint.x=n.x,void(p.centerPoint.y=n.y)}e.rotation-=_;var o=p.angle-T+e.rotation;T=e.rotation,p.set(o),r.reapplyTransforms()}}),l.on("pinchstart pinchmove",function(e){if(h()&&t.pinch){if("pinchstart"===e.type){x=e.scale;var n=g(e.center);return m.centerPoint.x=n.x,void(m.centerPoint.y=n.y)}var o=m.x/x*e.scale,a=m.y/x*e.scale;x=e.scale,m.set(o,a),r.reapplyTransforms()}});var k=!1;e.addEventListener("mousemove",function(){k&&(r.complete(),k=!1)}),e.addEventListener("mousewheel",function(e){if(h()){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),k=!0;var n=e.wheelDelta/120,o=Math.exp(.02*n),a={x:e.clientX,y:e.clientY};if(a=g(a),e.ctrlKey){if(!t.rotate)return;var i=50*-(o-1),u=(p.angle-i)%360;return p.set(u),p.centerPoint.x=a.x,p.centerPoint.y=a.y,void r.reapplyTransforms()}if(t.pinch){var s=m.x*o;m.set(s,s),m.centerPoint.x=a.x,m.centerPoint.y=a.y,r.reapplyTransforms()}}},!1),n(r)})})});t.hammerize=f},function(e,t){!function(){e.exports=window.hammerjs}()}]);
//# sourceMappingURL=transformer.min.js.map